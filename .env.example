# Gigateer Environment Configuration
# Copy this file to .env and customize the values for your environment

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Environment mode: development, production
NODE_ENV=development

# Base URL for the web application (used for PWA manifest, API calls)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# =============================================================================
# INGESTOR SERVICE CONFIGURATION
# =============================================================================

# Ingestor mode: development (more frequent, verbose) or production (conservative)
INGESTOR_MODE=development

# Default cron schedule for all scrapers (5-part cron expression)
# Development default: "*/10 * * * *" (every 10 minutes)
# Production default: "0 */3 * * *" (every 3 hours)
INGESTOR_DEFAULT_SCHEDULE="*/10 * * * *"

# Minutes to stagger between starting different scrapers (prevents overwhelm)
INGESTOR_STAGGER_MINUTES=5

# Global rate limiting: maximum requests per minute across all scrapers
# Development: 120 (higher for testing)
# Production: 60 (conservative, respectful)
INGESTOR_RATE_LIMIT_PER_MIN=60

# Request timeout in milliseconds
# Development: 60000 (60 seconds, allows debugging)
# Production: 30000 (30 seconds, standard)
INGESTOR_TIMEOUT_MS=30000

# =============================================================================
# SOURCE CONTROL
# =============================================================================

# Comma-separated list of scrapers to enable (optional)
# If not set, all available scrapers are enabled
# Examples: bandsintown, eventbrite, venue-calendar, venue-website
# INGESTOR_ENABLED_SOURCES=bandsintown,eventbrite

# Comma-separated list of scrapers to disable (optional)
# Useful for temporarily disabling problematic sources
# INGESTOR_DISABLED_SOURCES=broken-venue,maintenance-site

# =============================================================================
# FILE PATHS AND DIRECTORIES
# =============================================================================

# Directory for raw scraped data (before normalization)
# Default: ./data/sources (relative to project root)
# INGESTOR_RAW_DATA_DIR=./data/sources

# Directory for normalized data files
# Default: ./data/sources (same as raw for simplicity)
# INGESTOR_NORMALIZED_DATA_DIR=./data/sources

# Directory for ingestor logs
# Default: ./data/run-logs
# INGESTOR_LOG_DIR=./data/run-logs

# PID file for daemon process management
# Default: ./data/run-logs/ingestor.pid (or ingestor-dev.pid in development)
# INGESTOR_PID_FILE=./data/run-logs/ingestor.pid

# =============================================================================
# LOGGING AND MAINTENANCE
# =============================================================================

# Number of days to retain log files (cleanup old logs)
INGESTOR_LOG_RETENTION_DAYS=30

# Log level: trace, debug, info, warn, error, fatal
# Development default: debug
# Production default: info
INGESTOR_LOG_LEVEL=debug

# =============================================================================
# PWA (PROGRESSIVE WEB APP) CONFIGURATION
# =============================================================================

# Enable PWA features (service worker, offline support, installability)
NEXT_PUBLIC_PWA_ENABLED=true

# Enable push notifications for app updates
NEXT_PUBLIC_ENABLE_NOTIFICATIONS=true

# Cache TTL for API responses in milliseconds
# Default: 300000 (5 minutes)
NEXT_PUBLIC_CACHE_TTL=300000

# Service worker update check interval in milliseconds
# Default: 60000 (1 minute)
NEXT_PUBLIC_SW_UPDATE_INTERVAL=60000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Enable database usage (set to 'true' to use MongoDB instead of file-based storage)
INGESTOR_USE_DATABASE=false

# MongoDB connection string
MONGODB_CONNECTION_STRING=mongodb://localhost:27017

# MongoDB database name
MONGODB_DATABASE_NAME=gigateer

# Legacy PostgreSQL configuration (for future migration):
# DATABASE_URL=postgresql://user:password@localhost:5432/gigateer
# DATABASE_MAX_CONNECTIONS=20
# DATABASE_IDLE_TIMEOUT=30000

# =============================================================================
# SECURITY AND API KEYS
# =============================================================================

# API keys for external services (if using authenticated APIs)
# BANDSINTOWN_API_KEY=your_api_key_here
# EVENTBRITE_API_KEY=your_api_key_here
# TICKETMASTER_API_KEY=your_api_key_here

# CORS origins for API (comma-separated)
# CORS_ORIGINS=http://localhost:3000,https://yourdomain.com

# =============================================================================
# MONITORING AND ANALYTICS (Optional)
# =============================================================================

# Error tracking service (e.g., Sentry DSN)
# NEXT_PUBLIC_SENTRY_DSN=https://your-sentry-dsn

# Analytics service (e.g., Google Analytics)
# NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX

# =============================================================================
# DEVELOPMENT AND DEBUGGING
# =============================================================================

# Enable development features (detailed logging, debug endpoints)
# ENABLE_DEBUG_MODE=true

# Skip SSL verification for development (NOT for production)
# NODE_TLS_REJECT_UNAUTHORIZED=0

# Force specific user agent for scraping (if needed)
# SCRAPER_USER_AGENT="Mozilla/5.0 (compatible; Gigateer/1.0; +https://yourdomain.com/about)"

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Port for the web application (development only, production uses platform defaults)
# PORT=3000

# Build optimization settings
# NEXT_OPTIMIZE_IMAGES=true
# NEXT_BUILD_CACHE=true

# =============================================================================
# NOTES AND BEST PRACTICES
# =============================================================================

# 1. SECURITY: Never commit this file with real API keys or credentials
# 2. RATE LIMITS: Start conservative and increase gradually based on source tolerance
# 3. SCHEDULING: Use longer intervals in production to reduce server load
# 4. STAGGERING: Always use staggering to prevent overwhelming sources
# 5. TIMEOUTS: Set reasonable timeouts to prevent hanging requests
# 6. LOGGING: Use appropriate log levels for each environment
# 7. MONITORING: Enable monitoring in production to catch issues early

# For more configuration options and explanations, see:
# - /docs/user-guides/DEVELOPMENT.md
# - /docs/user-guides/DEPLOYMENT.md
# - services/ingestor/src/config.ts